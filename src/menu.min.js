function menuClicked(n){openUrl(n.currentTarget.getAttribute("s-href"))}function openUrl(n){n="/index"+(useNewUI?"":".min")+".html#"+(useNewUI?"":"!")+n;useNewUI||(n=n.replace("sprint","sprintreport").replace("/settings/general","/settings"));chrome.tabs.query({active:!0,lastFocusedWindow:!0},function(t){if(t&&t[0]&&t[0].url){var i=t[0],r=i.url;if(!r||replacePattern.indexOf(r.toLowerCase())>-1){chrome.tabs.update(i.id,{url:n});window.close();return}}isChrome?window.open(n):browser.tabs.create({url:n});window.close()})}function bindEvents(){for(var t=document.getElementsByTagName("a"),n=0;n<t.length;n++)t[n].addEventListener("click",menuClicked)}var isFirefox,isChrome,replacePattern,useNewUI,menu,menus,html,i;if(localStorage.getItem("CurrentJiraUrl")&&localStorage.getItem("CurrentUserId")||(document.location.href="/menu.min.html"),isFirefox=typeof InstallTrigger!="undefined",isChrome=!!chrome&&(!!chrome.webstore||!!chrome.identity)&&!isFirefox,replacePattern=["chrome://newtab/","chrome://tabs","about:newtab","about:tabs","about:blank"],useNewUI=localStorage.getItem("useNewUI"),useNewUI)try{useNewUI=JSON.parse(useNewUI).value}catch(err){useNewUI=!0}if(menu=localStorage.getItem("menuAction"),menu&&useNewUI)try{menu=JSON.parse(menu);switch(menu.action||1){case 1:if(menu.menus&&menu.menus.length>0&&Array.isArray(menu.menus)){for(menus=document.getElementById("menus"),html="",i=0;i<menu.menus.length;i++){let n=menu.menus[i];html+='<li><a s-href="'+n.url+'">'+n.name+"<\/a><\/li>"}menus.innerHTML=html}default:bindEvents();break;case 2:openUrl(menu.url||"/dashboard/0");break;case 3:document.location.href="/index.html?quick=true#/dashboard/"+(menu.index||0)+"/1"}}catch(err){console.error(err);bindEvents()}else bindEvents();